---
layout: post
title: "클린 아키텍처 6장: 함수형 프로그래밍"
author: "Jin"
tags: Clean-Architecture
---
## 함수형 프로그래밍

**함수형 프로그래밍**(Functional Programming)은 **순수 함수**를 중심으로 하여, 상태 변경이나 부작용을 최소화하는 프로그래밍 패러다임이다. 주요 개념으로는 **순수 함수**, **불변성**, **고차 함수** 등이 있다. 함수형 프로그래밍에서는 데이터나 상태를 변경하는 대신, 입력값을 받아 새로운 값을 반환하는 **순수 함수**를 사용하여 프로그램을 구성한다. 이는 동시성 문제를 줄이고, 테스트와 유지보수를 쉽게 만든다.

### 주요 개념:
- **순수 함수**: 입력이 같으면 항상 같은 출력을 반환하고, 외부 상태에 영향을 미치지 않는 함수.
- **불변성**: 데이터는 변경되지 않으며, 변경이 필요할 경우 새로운 값을 생성한다.
- **고차 함수**: 함수를 인자로 전달하거나 함수가 다른 함수를 반환하는 방식.

함수형 프로그래밍은 이러한 개념을 통해 코드의 예측 가능성을 높이고, **동시성 문제**를 해결하는 데 큰 장점을 제공한다.

## 가변 변수와 동시성

**경합 조건**, **교착 상태**, **동시 업데이트 문제**는 모두 가변 변수로 인해 발생한다. 이 문제들은 여러 스레드나 프로세스가 같은 가변 변수에 접근하거나 수정할 때 충돌이 발생하여 예상하지 못한 동작을 일으킨다.

따라서 애플리케이션을 제대로 구조화하려면 **변수를 변경하는 컴포넌트**와 **변경하지 않는 컴포넌트**를 명확히 분리해야 한다. 가능한 한 많은 로직을 **불변 컴포넌트**로 옮기고, **가변 컴포넌트**에서는 최대한 변수를 사용하지 않도록 설계하는 것이 중요하다. 이로 인해 동시성 문제를 줄이고 시스템의 안정성을 높일 수 있다.

## 이벤트 소싱

**이벤트 소싱**은 애플리케이션의 상태가 아닌, 상태를 변경하는 **트랜잭션(이벤트)**을 저장하는 전략이다. 상태가 필요할 때는 처음 상태부터 모든 트랜잭션을 재생하여 현재 상태를 재구성한다.

이 이벤트 기반 전략의 중요한 특징은 데이터 저장소에서 **삭제**나 **변경**이 일어나지 않는다는 점이다. 이러한 방식을 통해 데이터의 일관성을 유지하며, 특히 **동시 업데이트 문제**가 발생하지 않는다.

함수형 프로그래밍은 **불변성**을 강조하여, 가변 변수로 인해 발생하는 동시성 문제를 효과적으로 해결하는 방법을 제시한다. 또한, **이벤트 소싱**은 함수형 프로그래밍의 **불변성** 개념과 잘 맞아떨어지며, 상태 변경을 이벤트로 기록함으로써 상태 관리의 복잡성을 줄일 수 있다.
