---
layout: post
title: "개발자노트: 프로젝트 구조 정하기"
author: "Jin"
tags: 개발자노트
---
## 프로젝트 구조 정하기

혼자 개발할 때는 구조에 큰 신경을 쓰지 않아도 되지만, 프로젝트가 커지면 유지보수성과 테스트 용이성을 높이기 위해 구조화가 중요해진다. 올바른 프로젝트 구조는 코드의 가독성과 재사용성을 높이고, 팀 협업에 필요한 일관성을 제공한다. 또한 규모가 큰 애플리케이션에서 다양한 기능을 확장하거나 오류를 빠르게 해결할 수 있게 한다.

## MVVM 패턴

MVVM(Model-View-ViewModel) 패턴은 뷰(View)와 모델(Model)을 분리하여, 각자의 책임을 명확히 하면서도 의존성을 줄일 수 있다. MVVM을 사용하면 `View`는 `ViewModel`에 있는 데이터에 바인딩되고, `ViewModel`이 비즈니스 로직을 처리해 `Model`과의 데이터 상호작용을 관리한다. 

### MVVM의 장점

- **의존성 분리**: `View`는 `Model`과 직접 상호작용하지 않고, `ViewModel`을 통해 필요한 데이터와 상태를 가져온다. 이렇게 하면 UI와 비즈니스 로직을 독립적으로 개발하고 유지보수할 수 있다.
- **단방향 데이터 흐름**: 데이터는 `Model`에서 `ViewModel`로, 그리고 `ViewModel`에서 `View`로 흐르며, 이로 인해 상태 추적이 쉬워진다.
- **테스트 가능성**: `ViewModel`은 UI와 분리되어 있어 테스트 작성이 용이하다. 비즈니스 로직을 `ViewModel`에 포함하면 `View`가 없어도 독립적으로 테스트할 수 있다.

## Repository 패턴

Repository 패턴은 데이터 소스(API, 로컬 DB 등)에 접근하는 방식을 추상화하여 비즈니스 로직과 데이터 소스 간의 의존성을 줄이는 역할을 한다. 

### Repository 패턴이 필요한 이유

- **유지보수성**: 만약 비즈니스 로직에서 API를 직접 호출하면, API 주소나 데이터 구조가 변경될 때마다 모든 비즈니스 로직에 영향을 미친다. 그러나 Repository를 통해 API 호출을 분리해 두면, 데이터 소스 관련 수정은 Repository 내에서만 이루어지므로 코드 수정이 간단해진다.
- **데이터 소스 교체 용이**: 예를 들어, 초기에는 API를 통해 데이터를 가져오다가 로컬 DB로 대체해야 할 경우, Repository 내부에서 데이터 소스를 변경하면 된다. 비즈니스 로직을 변경하지 않고도 쉽게 데이터 소스를 전환할 수 있다.
- **테스트 용이성**: Repository는 인터페이스를 통해 구현되므로, 테스트에서 Mock Repository를 주입하여 데이터 소스를 쉽게 대체할 수 있다. 이를 통해 API와 독립적으로 비즈니스 로직을 테스트할 수 있다.

## API 레이어와 DTO(Data Transfer Object) 레이어

프로젝트 구조에서 API와 DTO를 별도의 레이어로 구성하면, 데이터의 유지보수성과 확장성을 높일 수 있다.

### API 레이어

API 레이어는 서버의 API 명세대로 작성하여 네트워크 통신을 전담하는 역할을 한다. 이 레이어에서는 서버와의 요청과 응답을 처리하고, 이를 통해 받은 데이터는 그대로 DTO로 전달된다. 

- **책임 분리**: API 호출 및 응답 처리를 전담하여 네트워크 관련 로직이 다른 코드와 섞이지 않도록 한다.
- **유지보수성**: 서버 API가 변경되면 이 레이어에서만 수정하면 되므로, 데이터 처리 로직과 독립적으로 관리할 수 있다.

### DTO(Data Transfer Object) 레이어

DTO 레이어는 API에서 받은 데이터의 구조를 앱 내부에서 사용하기 쉽게 변환한다. 대규모 프로젝트에서는 서버의 데이터 구조가 앱의 요구사항과 일치하지 않거나, 서로 다른 데이터 소스(API, 로컬 DB 등)에서 데이터를 받는 경우가 많기 때문에 DTO 레이어가 유용하다.

- **데이터 변환과 가공**: 예를 들어, 서버에서 받는 데이터 구조가 앱에서 필요한 구조와 다를 때 DTO 레이어에서 이를 가공하여 `Model`로 변환한다.
- **호환성 유지**: 앱에서 필요한 데이터 필드가 서버에서 제공되지 않거나 반대로 불필요한 필드가 있을 경우, DTO를 사용해 필요한 필드만 포함한 새로운 구조로 정의할 수 있다.
- **재사용성**: 다양한 데이터 소스를 사용하게 되는 경우, DTO는 데이터 소스 간의 일관성을 유지하고, 중복 코드 작성을 줄일 수 있다. 

## Doamin 레이어



## Feature-first vs Layer-first

두 가지 모두 사용해본 관점에서 각각의 장단점이 존재한다.

### Feature-first

장점

1. 기능별로 관리하기 때문에 새로운 기능을 추가하거나, 기능을 수정하는 것이 용이하다.

단점

1. 두 가지 기능 이상에서 사용된다면 common 폴더가 필요한데, 프로젝트가 커지다보면 common 폴더가 너무 커진다.

### Layer-first

장점

1. 프로젝트 규모가 커지더라도 비교적 폴더 구조를 깔끔하게 유지할 수 있다.

단점

1. 기능을 추가하거나 수정할때 불편하다.

최종적인 폴더의 구조는 다음과 같다.



출처 [code with andrea](https://codewithandrea.com/tutorials/) 